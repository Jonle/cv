/*!
 * ====================================================
 * cvjs - v1.0.0 - 2015-08-28
 * https://github.com/Naixor/cv
 * GitHub: https://github.com/Naixor/cv 
 * Copyright (c) 2015 ; Licensed 
 * ====================================================
 */

!function(){function a(a){b.r([c[a]])}var b={r:function(a){if(b[a].inited)return b[a].value;if("function"!=typeof b[a].value)return b[a].inited=!0,b[a].value;var c={exports:{}},d=b[a].value(null,c.exports,c);if(b[a].inited=!0,b[a].value=d,void 0!==d)return d;for(var e in c.exports)if(c.exports.hasOwnProperty(e))return b[a].inited=!0,b[a].value=c.exports,c.exports}};b[0]={value:function(a,b,c){var d,e,f,g,h=function(a,b,c){d=document.querySelector(a),e=d.getContext("2d");var h=new Image;h.onload=function(){f=d.width=h.width,g=d.height=h.height,e.drawImage(h,0,0,f,g),c(e,f,g)},h.src=b};c.exports.init=h}},b[1]={value:function(a,c,d){d.exports={rgb2lab:b.r(4),rgb2xyz:b.r(5),lab2rgb:b.r(2),lab2xyz:b.r(3)}}},b[2]={value:function(a){var c=b.r(7),d=b.r(3);return function(a){return c(d(a))}}},b[3]={value:function(){return function(a){var b,c,d,e,f=a[0],g=a[1],h=a[2];return 8>=f?(c=100*f/903.3,e=7.787*(c/100)+16/116):(c=100*Math.pow((f+16)/116,3),e=Math.pow(c/100,1/3)),b=.008856>=b/95.047?b=95.047*(g/500+e-16/116)/7.787:95.047*Math.pow(g/500+e,3),d=.008859>=d/108.883?d=108.883*(e-h/200-16/116)/7.787:108.883*Math.pow(e-h/200,3),[b,c,d]}}},b[4]={value:function(a){var c=b.r(5);return function(a){var b,d,e,f=c(a),g=f[0],h=f[1],i=f[2];return g/=95.047,h/=100,i/=108.883,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,b=Math.round(116*h-16),d=Math.round(500*(g-h)),e=Math.round(200*(h-i)),[b,d,e]}}},b[5]={value:function(a,b,c){return function(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255;b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92;var e=.4124*b+.3576*c+.1805*d,f=.2126*b+.7152*c+.0722*d,g=.0193*b+.1192*c+.9505*d;return[100*e,100*f,100*g]}}},b[6]={value:function(){return function(a){var b,c,d,e=a[0],f=a[1],g=a[2];return e/=95.047,f/=100,g/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,b=Math.round(116*f-16),c=Math.round(500*(e-f)),d=Math.round(200*(f-g)),[b,c,d]}}},b[7]={value:function(a){return function(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100;return b=3.2406*e+-1.5372*f+g*-.4986,c=e*-.9689+1.8758*f+.0415*g,d=.0557*e+f*-.204+1.057*g,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b=12.92*b,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=12.92*c,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d=12.92*d,b=Math.min(Math.max(0,b),1),c=Math.min(Math.max(0,c),1),d=Math.min(Math.max(0,d),1),[255*b,255*c,255*d]}}},b[8]={value:function(a,c,d){d.constructor.prototype.extend=function(a,b){var c;for(c in a)b[c]=a},d.exports.filter={Gray:b.r(16),Gauss:b.r(15),Laplace:b.r(17),sLaplace:b.r(19),Sobel:b.r(18),Canny:b.r(11),Bilateral:b.r(10),DoG:b.r(13),Cartoon:b.r(12)},d.exports.canvas=b.r(0)}},b[9]={value:function(a,c,d){return window.CV=d.exports=b.r(8)}},b[10]={value:function(a,b,c){var d=127,e=function(a){0>a||d>255||(d=a)},f=function(a,b,c,e,f,g){e=e||3,f=f||e/3,g=g||1;for(var h=new Array(2*e+1),i=new Array(511),j=1/(Math.sqrt(2*Math.PI)*f),k=-1/(2*f*f),l=1/(Math.sqrt(2*Math.PI)*g),m=-1/(2*g*g),n=0,o=-e;0>=o;o++)h[o+e]=h[e-o]=j*Math.exp(k*o*o),n+=h[o+e]+h[e-o];for(var o=0;256>o;o++)i[o]=i[0-o]=l*Math.exp(m*o*o);for(var p,j,q,r,s,t,u,v,w,x,y=0,z=0,A=0;c>A;A++)for(var B=0;b>B;B++){p=q=j=0,z=b*A+B<<2,v=w=x=0;for(var o=-e;e>=o;o++)r=B+o,r>=0&&b>r?(y=b*A+r<<2,s=h[o+e]*i[Math.round(a[y]-a[z])],t=h[o+e]*i[Math.round(a[y+1]-a[z+1])],u=h[o+e]*i[Math.round(a[y+2]-a[z+2])],p+=a[y]*s,j+=a[y+1]*t,q+=a[y+2]*u):(s=h[o+e]*i[Math.round(d-a[z])],t=h[o+e]*i[Math.round(d-a[z+1])],u=h[o+e]*i[Math.round(d-a[z+2])],p+=d*s,j+=d*t,q+=d*u),v+=s,w+=t,x+=u;a[z]=p/v,a[z+1]=j/w,a[z+2]=q/x}for(var B=0;b>B;B++)for(var A=0;c>A;A++){p=q=j=0,z=b*A+B<<2,v=w=x=0;for(var o=-e;e>=o;o++)r=A+o,r>=0&&c>r?(y=b*r+B<<2,s=h[o+e]*i[Math.round(a[y]-a[z])],t=h[o+e]*i[Math.round(a[y+1]-a[z+1])],u=h[o+e]*i[Math.round(a[y+2]-a[z+2])],p+=a[y]*s,j+=a[y+1]*t,q+=a[y+2]*u):(s=h[o+e]*i[Math.round(d-a[z])],t=h[o+e]*i[Math.round(d-a[z+1])],u=h[o+e]*i[Math.round(d-a[z+2])],p+=d*s,j+=d*t,q+=d*u),v+=s,w+=t,x+=u;a[z]=p/v,a[z+1]=j/w,a[z+2]=q/x}},g=function(a,b,c,e,f,g){e=e||3,f=f||e/3,g=g||1;for(var h=new Array(2*e+1),i=new Array(511),j=1/(Math.sqrt(2*Math.PI)*f),k=-1/(2*f*f),l=1/(Math.sqrt(2*Math.PI)*g),m=-1/(2*g*g),n=0,o=-e;0>=o;o++)h[o+e]=h[e-o]=j*Math.exp(k*o*o),n+=h[o+e]+h[e-o];for(var o=0;256>o;o++)i[o]=i[0-o]=l*Math.exp(m*o*o);for(var p,q,r,s,t=0,u=0,v=0;c>v;v++)for(var w=0;b>w;w++){p=0,u=b*v+w<<2,s=0;for(var o=-e;e>=o;o++)q=w+o,q>=0&&b>q?(t=b*v+q<<2,r=h[o+e]*i[Math.round(a[t]-a[u])],p+=a[t]*r):(r=h[o+e]*i[Math.round(d-a[u])],p+=d*r),s+=r;a[u]=p/s}for(var w=0;b>w;w++)for(var v=0;c>v;v++){p=0,u=b*v+w<<2,s=0;for(var o=-e;e>=o;o++)q=v+o,q>=0&&c>q?(t=b*q+w<<2,r=h[o+e]*i[Math.round(a[t]-a[u])],p+=a[t]*r):(r=h[o+e]*i[Math.round(d-a[u])],p+=d*r),s+=r;a[u]=p/s}};c.exports.process=f,c.exports.process.r=g,c.exports.setBoundaryFillColor=e}},b[11]={value:function(a,c,d){var e=b.r(14),f=b.r(21),g=b.r(15).process,h=function(a,b,c,e,h){for(var i=0;c>i;i++)for(var j=0;b>j;j++){var k=b*i+j<<2,l=.299*a[k]+.587*a[k+1]+.114*a[k+2];a[k]=l,a[k+1]=l,a[k+2]=l}h||(h=e/2),g(a,b,c,2,1.4);var m,n,o,p,q,k,r=[-1,0,1,-1,0,1,-1,0,1],s=[1,1,1,0,0,0,-1,-1,-1],t=f.copyImageData(a),u=[],v=[];f.each.xDirection(a,b,0,0,b,c,function(a,e,g){m=f.convolution(f.getImageConvolution(t,b,c,e,g,0,1,d.exports.boundaryFillColor.boundaryFillColor),r,1,0),n=f.convolution(f.getImageConvolution(t,b,c,e,g,0,1,d.exports.boundaryFillColor.boundaryFillColor),s,1,0),v[a]=0===m?1e3:n/m,u[a]=Math.round(Math.sqrt(m*m+n*n))}),t=f.copyImageData(a),f.each.xDirection(a,b,0,0,b,c,function(d,e,f){if(0===e||e===b-1||0===f||f===c-1)return u[d]=0,a[d]=a[d+1]=a[d+2]=0;switch(q=Math.floor(4*Math.atan(v[d])/Math.PI)){case 0:o=(u[(f-1)*b+e+1<<2]-u[f*b+e+1<<2])*v[d]+u[f*b+e+1<<2],p=(u[(f+1)*b+e-1<<2]-u[f*b+e-1<<2])*v[d]+u[f*b+e-1<<2];break;case 1:o=(u[(f-1)*b+e+1<<2]-u[(f-1)*b+e<<2])/v[d]+u[(f-1)*b+e<<2],p=(u[(f+1)*b+e-1<<2]-u[(f+1)*b+e<<2])/v[d]+u[(f+1)*b+e<<2];break;case-1:o=(u[(f-1)*b+e-1<<2]-u[(f-1)*b+e<<2])*v[d]*-1+u[(f-1)*b+e<<2],p=(u[(f+1)*b+e+1<<2]-u[(f+1)*b+e<<2])*v[d]*-1+u[(f+1)*b+e<<2];break;case-2:o=(u[(f-1)*b+e-1<<2]-u[f*b+e-1<<2])/v[d]*-1+u[f*b+e-1<<2],p=(u[f*b+e+1<<2]-u[(f+1)*b+e+1<<2])/v[d]*-1+u[(f+1)*b+e+1<<2]}u[d]>o&&u[d]>p?a[d]=a[d+1]=a[d+2]=255:a[d]=a[d+1]=a[d+2]=0}),f.each.xDirection(a,b,0,0,b,c,function(c,d,f){if(q=u[c],0!==a[c])if(q>=e)a[c]=a[c+1]=a[c+2]=255;else if(h>q)a[c]=a[c+1]=a[c+2]=0;else{a[j]=a[j+1]=a[j+2]=0;for(var g,i,j,k=[-1,0,1,-1,1,-1,0,1],l=[-1,-1,-1,0,0,1,1,1],c=0;8>c;c++)g=d+k[c],i=f+l[c],j=i*b+g<<2,u[j]>=e&&(a[j]=a[j+1]=a[j+2]=255)}})};d.extend(e,d.exports),d.exports.process=h}},b[12]={value:function(a,c,d){var e=b.r(21),f=b.r(10).process,g=b.r(13).process,h=b.r(11).process,i=b.r(1),j=function(a,b,c,d,j){var k,l,m,n,o,p,q,r,d=d||10,j=j||10,s=[];r=e.copyImageData(a),q=e.copyImageData(a),e.each.xDirection(a,b,0,0,b,c,function(b){m=a[b],n=a[b+1],o=a[b+2],k=i.rgb2lab([m,n,o]);for(var c=0;3>c;c++)s.push(k[c]);s.push(255)}),f.r(s,b,c,3,3,5),f.r(s,b,c,3,3,5),f.r(s,b,c,3,3,5),f.r(s,b,c,3,3,5),f.r(s,b,c,3,3,5),f.r(s,b,c,3,3,5),e.each.xDirection(s,b,0,0,b,c,function(a,b,c){p=Math.tanh(j*(d-s[a]%d)),s[a]=(Math.floor(s[a]/d)+.5)*d+p}),e.each.xDirection(a,b,0,0,b,c,function(b,c,d){m=s[b],n=s[b+1],o=s[b+2],l=i.lab2rgb([m,n,o]),a[b]=l[0],a[b+1]=l[1],a[b+2]=l[2]}),g(r,b,c,3,3,1,.3,6),h(q,b,c,100,30),e.each.xDirection(a,b,0,0,b,c,function(b){255===q[b]?a[b]=a[b+1]=a[b+2]=0:255===r[b]&&(a[b]=a[b+1]=a[b+2]=0)})};d.exports.process=j}},b[13]={value:function(a,c,d){var e=b.r(21),f=b.r(16).process,g=b.r(15).process,h=function(a,b,c,d,h,i,j,k){k=k||3,f(a,b,c);var l,m=e.copyImageData(a);g(m,b,c,d,i),g(a,b,c,h,j),e.each.xDirection(a,b,0,0,b,c,function(b){l=m[b]-a[b],k>l?a[b]=a[b+1]=a[b+2]=0:a[b]=a[b+1]=a[b+2]=255})};d.exports.process=h}},b[14]={value:function(a,b,c){var d=function(a){0>a||a>255||(this.boundaryFillColor=a)};return d.getBoundaryFillColor=function(){return boundaryFillColor},d.setBoundaryFillColor=function(a){0>a||a>255||(this.boundaryFillColor=a)},new d(127)}},b[15]={value:function(a,c,d){var e=b.r(21),f=127,g=function(a){0>a||f>255||(f=a)},h=function(a,b,c,d,e){d=d||3,e=e||d/3;for(var g=new Array(2*d+1),h=1/(Math.sqrt(2*Math.PI)*e),i=-1/(2*e*e),j=0,k=-d;d>=k;k++)g[k+d]=h*Math.exp(i*k*k),j+=g[k+d];for(var k=0;d>=k;k++)g[k+d]=g[d-k]=g[d-k]/j;for(var l,h,m,n,o=0,p=0;c>p;p++)for(var q=0;b>q;q++){l=m=h=0;for(var k=-d;d>=k;k++)n=q+k,o=b*p+n<<2,n>=0&&b>n?(l+=a[o]*g[k+d],h+=a[o+1]*g[k+d],m+=a[o+2]*g[k+d]):(l+=f*g[k+d],h+=f*g[k+d],m+=f*g[k+d]);o=b*p+q<<2,a[o]=l,a[o+1]=h,a[o+2]=m}for(var q=0;b>q;q++)for(var p=0;c>p;p++){l=m=h=0;for(var k=-d;d>=k;k++)n=p+k,o=b*n+q<<2,n>=0&&c>n?(l+=a[o]*g[k+d],h+=a[o+1]*g[k+d],m+=a[o+2]*g[k+d]):(l+=f*g[k+d],h+=f*g[k+d],m+=f*g[k+d]);o=b*p+q<<2,a[o]=l,a[o+1]=h,a[o+2]=m}},i=function(a,b,c){e.each.xDirection(a,b,0,0,b,c,function(d,g,h){for(var i=0;3>i;i++)a[d+i]=e.convolution(e.getImageConvolution(a,b,c,g,h,i,1,f),[.0453542,.0566406,.0453542,.0566406,.0707355,.0566406,.0453542,.0566406,.0453542],.4787147,0)})};d.exports.process=h,d.exports.setBoundaryFillColor=g,d.exports.process["default"]=i}},b[16]={value:function(a,b,c){var d=function(a){for(var b=a.length-1,c=0;b>=0;)c=.299*a[b-3]+.587*a[b-2]+.114*a[b-1],a[b-3]=a[b-2]=a[b-1]=c,b-=4};c.exports.process=d}},b[17]={value:function(a,c,d){var e=b.r(21),f=127,g=function(a){0>a||f>255||(f=a)},h=function(a,b,c){var d=e.copyImageData(a);e.each.xDirection(a,b,0,0,b,c,function(g,h,i){for(var j=0;3>j;j++)a[g+j]=e.convolution(e.getImageConvolution(d,b,c,h,i,j,1,f),[0,-1,0,-1,4,-1,0,-1,0],1,0)})};d.exports.process=h,d.exports.setBoundaryFillColor=g}},b[18]={value:function(a,c,d){var e=b.r(14),f=b.r(21),g=b.r(16).process,h=b.r(15),i=function(a,b,c,d,e){g(a),h.setBoundaryFillColor(127),h.process(a,b,c,3,1);var i,j,k,l=[-1,0,1,-2,0,2,-1,0,1],m=[-1,-2,-1,0,0,0,1,2,1],n=f.copyImageData(a),o=4,p=0;f.each.xDirection(a,b,0,0,b,c,function(d,e,g){i=f.convolution(f.getImageConvolution(n,b,c,e,g,0,1,127),l,1,0),j=f.convolution(f.getImageConvolution(n,b,c,e,g,0,1,127),m,1,0),k=Math.sqrt(i*i+j*j),a[d]=a[d+1]=a[d+2]=k,p+=k}),d!==!1&&+d||(d=o*p/b/c),f.each.xDirection(a,b,0,0,b,c,function(b){e||(a[b]>d?a[b]=a[b+1]=a[b+2]=255:a[b]=a[b+1]=a[b+2]=0)})};d.extend(e,d.exports),d.exports.process=i}},b[19]={value:function(a,c,d){var e=b.r(21),f=b.r(16).process,g=b.r(16).process,h=b.r(17).process,i=function(a,b,c){f(a,b,c),g(a,b,c,3,1),h(a,b,c);var d=0;e.each.xDirection(a,b,0,0,b,c,function(b){var c=a[b]+a[b+1]+a[b+2];(15>c||765===c)&&(d++,a[b]=a[b+1]=a[b+2]=255)})};d.exports.process=i}},b[20]={value:function(a,c,d){var e=b.r(21);["xDirection","yDirection"].map(function(a){return{name:a,constructor:function(b,c,d,f){var g=[].slice.call(arguments);if(b=g.shift(),f=g.pop(),!e.isFunction(f))throw new Error("没有传入合法回调函数");var h=b.width,i=b.height,j=c.x||c[0]||0,k=c.y||c[1]||0,l=d.x||d[0]||h,m=d.y||d[1]||i;e.each[a](b.data,h,j,k,l,m,f)}}}).forEach(function(a){d.exports[a.name]=a.constructor})}},b[21]={value:function(a,b,c){var d={xDirection:function(a,b,c,d,e,f,g){for(var h=d;f>h;h++)for(var i=c;e>i;i++)g(h*b+i<<2,i,h)},yDirection:function(a,b,c,d,e,f,g){for(var h=c;e>h;h++)for(var i=d;f>i;i++)g(i*b+h<<2,h,i)}},e=function(a,b,c,d){var e=0,f=0;for(f=0,l=b.length;f<l;f++)e+=b[f]*a[f];return e/c+d},f=function(a,b,c,d,e,f,g,h){var i,j,k=0,l=0,m=[],g=g||1,h=h||0;for(l=-g;g>=l;l++)for(i=e+l,k=-g;g>=k;k++)j=d+k,i>=c-1||0>i||j>=b-1||0>j?m.push(h):m.push(a[4*(j+b*i)+f]);return m},g=function(a){return new Uint8ClampedArray(a)};["Array","Function","Object","String","Boolean","Number"].forEach(function(a){c.exports["is"+a]=function(a){return function(b){return Object.prototype.toString.call(b)==="[object "+a+"]"}}(a)}),c.exports.each=d,c.exports.getImageConvolution=f,c.exports.convolution=e,c.exports.copyImageData=g}};var c={"expose-cv":9};a("expose-cv")}();